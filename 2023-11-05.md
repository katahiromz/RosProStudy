# 2023-11-05

## ReactOSをビルドしてみよう

ReactOSの開発に入る。GitHubで開発を始める前に電子メールのアドレスが必要だ。
電子メールを持っていない場合は、Googleが運営するGMailからメールアドレスを取得する。

メールアドレスを使ってGitHubにユーザー登録する。
ユーザーIDを決め、10文字以上の推測されないパスワードを決める。
GitHubに無事登録されれば、ユーザーIDが取得できる。

GitHubにログインして、ReactOSの公式リポジトリ https://github.com/reactos/reactos を開いて、Forkボタンを押す。
Forkにより、

https://github.com/(あなたのID)/reactos

が得られる。Forkしないと後でPull Requestができない。Forkしたリポジトリをgit cloneでローカルに取り込む。

「git clone https://github.com/(あなたのID)/reactos」

続きは

- 「ReactOS開発の手引き」 https://katahiromz.fc2.page/reactos/

を参照。

## ReactOSの構造

ReactOSのソースコードは以下のような構造である：

- base/applications : ReactOSのアプリの集合。
- base/applications/calc : ReactOS の電卓。
- base/applications/notepad : ReactOS のメモ帳。
- base/applications/charmap : ReactOS の文字コード表。
- base/applications/mspaint : ReactOS のペイントアプリ。
- base/applications/rapps: ReactOS のアプリ マネージャ。
- base/applications/regedit: ReactOS のレジストリエディタ。
- base/applications/taskmgr : ReactOS のタスクマネージャー
- base/setup : セットアップ用のプログラムの集合。
- base/setup/usetup : ReactOSのテキストベースのセットアッププログラム。
- base/shell : 重要なシェルプログラムの集合。
- base/shell/cmd : コマンドプロンプト。
- base/shell/explorer : エクスプローラ。
- boot/bootdata : 起動に必要なデータが含まれている。レジストリデータもここにある。
- dll/ : DLLファイルの集合。
- dll/cpl : コントロールパネルに関するモジュールの集合。
- dll/keyboard : キーボードドライバの集合。
- dll/shellext : シェル拡張に関するモジュールの集合。
- dll/win32/imm32 : 日本語入力に欠かせないimm32.dll.。
- dll/win32/kernel32 : ファイル入出力、文字列処理、ロケールなどの重要な機能を提供する。
- dll/win32/shlwapi : シェル軽量API。シェルを助ける関数の集合。
- dll/win32/shell32 : シェルの主な機能を提供するDLL。
- drivers : ドライバの集合。
- hal : ハードウェア抽象化レイヤー。
- media : 文書ファイル、フォントファイル、テーマファイル、音声ファイルなど。
- modules/rostests : テスト用のプログラムの集合。
- modules/rostests/apitests : ReactOS独自のテストプログラム。
- modules/rostests/winetests : WineHQから借りたテストプログラム。
- ntoskrnl : これがOSの心臓部。NTカーネル。
- sdk : SDK (Software Development Kit)。ソフトウェア開発に必要なものの集合。
- sdk/include : SDKのヘッダファイルの集合。
- sdk/lib : SDKのライブラリの集合。
- sdk/lib/atl : Active Template Library
- sdk/tools : ソフトウェア開発に必要なツールなど。
- win32ss : Win32サブシステム。
- win32ss/gdi/gdi32 : 描画関連のgdi32.dll
- win32ss/gdi/ntgdi : gdi32より低レベルなwin32k.sysの一部。
- win32ss/user/user32 : GUI関連のuser32.dll
- win32ss/user/ntuser : user32よりも低レベルなwin32k.sysの一部。

## 調べてみよう（その１）

win32ss/user/user32の中には user32.dllの関数が含まれている。
user32.dllのGetDlgItemTextW関数の仕組みを調べてみよう。
win32ss/user/user32の中で「GetDlgItemTextW」をgrepする。

## 調べてみよう（その２）

user32.dllのSetDlgItemInt関数の仕組みを調べてみよう。

## 調べてみよう（その３）

imm32.dllのImmReleaseContext関数の仕組みを調べてみよう。
imm32.dllのソースコードはdll/win32/imm32にある。
dll/win32/imm32でImmReleaseContextをgrepしてみよう。

## 便利なWin32アプリを作ってみよう

【課題2】Win32で使用されている言語IDについて調査し、言語名、言語ID・サブ言語IDの10進・16進表記などをTSVにまとめ、相互に変換したり、調査できるアプリを作ってみよう。
Win32のMAKELANGIDマクロ、RosProStudyの [data/PrimaryLangIDs.txt](data/PrimaryLangIDs.txt)、 [data/SubLangIDs.txt](data/SubLangIDs.txt) を参照。

---

[上へ](README.md) | [戻る](2023-10-29.md)
